{% extends 'base.html' %}
{% load humanize %}

{% block content %}
<h2 class="mb-3">Reporte de Ganancias</h2>
<div class="row">
    <div class="col-md-8">
        <div class="card p-3 shadow mb-4">
            <canvas id="chart"></canvas>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card shadow">
            <div class="card-header">Resumen Mensual</div>
            <ul class="list-group list-group-flush">
                {% for m in metrics %}
                <li class="list-group-item d-flex justify-content-between">
                    <span>{{ m.month|date:"F Y" }}</span>
                    <strong>${{ m.total_earnings|intcomma }}</strong>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    new Chart(document.getElementById('chart'), {
        type: 'bar',
        data: {
            labels: {{ chart_labels|safe }},
            datasets: [{
                label: 'Ingresos ($)',
                data: {{ chart_data|safe }},
                backgroundColor: '#0d6efd'
            }]
        }
    });
</script>
{% endblock %}